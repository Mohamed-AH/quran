<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุชุญูู | Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@300;400;600;700&family=Rakkas&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header>
            <div class="header-top">
                <div class="header-left">
                    <button class="btn-secondary" onclick="window.location.href='/app.html'">
                        โ <span id="backToAppText">ุงูุนูุฏุฉ ููุชุทุจูู</span>
                    </button>
                    <button class="lang-toggle" onclick="toggleLanguage()" id="langBtn">English</button>
                </div>
                <div class="header-right">
                    <div class="admin-badge">
                        <span id="adminBadgeText">ูุฏูุฑ</span>
                    </div>
                </div>
            </div>
            <div class="header-center">
                <h1 id="adminTitle">ููุญุฉ ุงูุชุญูู</h1>
                <p class="subtitle" id="adminSubtitle">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุฅุนุฏุงุฏุงุช</p>
            </div>
        </header>

        <!-- Settings Section -->
        <section class="admin-section">
            <h2 id="settingsTitle">โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</h2>
            <div class="settings-toggles">
                <div class="setting-item">
                    <div class="setting-info">
                        <h3 id="signupControlTitle">ุงูุชุญูู ูู ุงูุชุณุฌูู</h3>
                        <p id="signupControlDesc">ุชูุนูู ูุธุงู ุฑููุฒ ุงูุฏุนูุฉ ููุชุณุฌูู</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggleSignupControl" onchange="updateSettings()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <h3 id="leaderboardTitle">ููุญุฉ ุงููุชุตุฏุฑูู</h3>
                        <p id="leaderboardDesc">ุฅุธูุงุฑ ุฃู ุฅุฎูุงุก ููุญุฉ ุงููุชุตุฏุฑูู ููุทูุงุจ</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggleLeaderboard" onchange="updateSettings()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </section>

        <!-- Dashboard Stats -->
        <section class="admin-section">
            <h2 id="statsTitle">๐ ุงูุฅุญุตุงุฆูุงุช</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalUsers">0</div>
                    <div class="stat-label" id="labelTotalUsers">ุฅุฌูุงูู ุงููุณุชุฎุฏููู</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeUsers">0</div>
                    <div class="stat-label" id="labelActiveUsers">ูุดุท (7 ุฃูุงู)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalPages">0</div>
                    <div class="stat-label" id="labelTotalPages">ุตูุญุงุช ูุญููุธุฉ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completedJuz">0</div>
                    <div class="stat-label" id="labelCompletedJuz">ุฃุฌุฒุงุก ููุชููุฉ</div>
                </div>
            </div>
        </section>

        <!-- User Management -->
        <section class="admin-section">
            <div class="section-header">
                <h2 id="usersTitle">๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
                <div class="search-bar">
                    <input type="text" id="userSearch" placeholder="ุจุญุซ..." onkeyup="searchUsers()">
                </div>
            </div>
            <div class="table-container">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th id="thName">ุงูุงุณู</th>
                            <th id="thEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                            <th id="thRole">ุงูุฏูุฑ</th>
                            <th id="thJoined">ุชุงุฑูุฎ ุงูุชุณุฌูู</th>
                            <th id="thActions">ุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <tr>
                            <td colspan="5" class="loading" id="loadingText">ุฌุงุฑู ุงูุชุญููู...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="pagination" id="usersPagination"></div>
        </section>

        <!-- Invite Codes Management -->
        <section class="admin-section">
            <div class="section-header">
                <h2 id="inviteCodesTitle">๐๏ธ ุฑููุฒ ุงูุฏุนูุฉ</h2>
                <button class="btn" onclick="showCreateInviteModal()" id="btnCreateInvite">
                    + ุฅูุดุงุก ุฑูุฒ ุฌุฏูุฏ
                </button>
            </div>
            <div class="invite-codes-grid" id="inviteCodesGrid">
                <p class="loading" id="loadingInvites">ุฌุงุฑู ุงูุชุญููู...</p>
            </div>
        </section>
    </div>

    <!-- Create Invite Code Modal -->
    <div class="modal" id="createInviteModal" style="display:none;">
        <div class="modal-content">
            <button class="close-btn" onclick="closeCreateInviteModal()">ร</button>
            <h2 id="modalTitle">ุฅูุดุงุก ุฑูุฒ ุฏุนูุฉ ุฌุฏูุฏ</h2>
            <div class="form-group">
                <label id="labelMaxUses">ุนุฏุฏ ุงูุงุณุชุฎุฏุงูุงุช:</label>
                <input type="number" id="inviteMaxUses" value="1" min="1">
            </div>
            <div class="form-group">
                <label id="labelExpires">ุชุงุฑูุฎ ุงูุงูุชูุงุก (ุงุฎุชูุงุฑู):</label>
                <input type="date" id="inviteExpires">
            </div>
            <div class="form-group">
                <label id="labelDescription">ุงููุตู (ุงุฎุชูุงุฑู):</label>
                <input type="text" id="inviteDescription" placeholder="ูุซุงู: ุงููุตู ุงูุซุงูู">
            </div>
            <div class="modal-actions">
                <button class="btn" onclick="createInviteCode()" id="btnCreate">ุฅูุดุงุก</button>
                <button class="btn-secondary" onclick="closeCreateInviteModal()" id="btnCancel">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- User Details Modal -->
    <div class="modal" id="userDetailsModal" style="display:none;">
        <div class="modal-content modal-large">
            <button class="close-btn" onclick="closeUserDetailsModal()">ร</button>
            <h2 id="userDetailsTitle">ุชูุงุตูู ุงููุณุชุฎุฏู</h2>
            <div id="userDetailsContent"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
